{"is_source_file": true, "format": "Python", "description": "This file defines a ConnectionManager class for handling WebSocket connections in a real-time notification system, including managing user connections, sending messages, and broadcasting.", "external_files": ["starlette.websockets"], "external_methods": ["WebSocket.accept", "WebSocket.send_json", "WebSocketDisconnect"], "published": ["ws_manager"], "classes": [{"name": "ConnectionManager", "description": "Manages WebSocket connections per user, including connecting, disconnecting, sending personal messages, and broadcasting to all users."}], "methods": [{"name": "None __init__(self)", "description": "Initializes the ConnectionManager with an empty mapping of user IDs to WebSocket sets.", "scope": "ConnectionManager", "scopeKind": "class"}, {"name": "None connect(self, user_id: int, websocket: WebSocket)", "description": "Accepts and registers a WebSocket connection for a specified user.", "scope": "ConnectionManager", "scopeKind": "class"}, {"name": "None disconnect(self, user_id: int, websocket: WebSocket)", "description": "Removes a WebSocket connection for a user, cleaning up if necessary.", "scope": "ConnectionManager", "scopeKind": "class"}, {"name": "None send_personal_message(self, user_id: int, message: dict)", "description": "Sends a message to all active WebSocket connections of a user, handling disconnects and errors.", "scope": "ConnectionManager", "scopeKind": "class"}, {"name": "None broadcast(self, message: dict)", "description": "Sends a message to all connected users' WebSocket connections.", "scope": "ConnectionManager", "scopeKind": "class"}], "calls": ["websocket.accept", "ws.send_json", "self.disconnect"], "search-terms": ["WebSocket connection management", "FastAPI WebSocket", "notifications", "ConnectionManager", "user_id"], "state": 2, "file_id": 49, "knowledge_revision": 126, "git_revision": "", "ctags": [{"_type": "tag", "name": "ConnectionManager", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/services/notifications.py", "pattern": "/^class ConnectionManager:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/services/notifications.py", "pattern": "/^    def __init__(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "broadcast", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/services/notifications.py", "pattern": "/^    async def broadcast(self, message: dict) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, message: dict)", "scope": "ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "connect", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/services/notifications.py", "pattern": "/^    async def connect(self, user_id: int, websocket: WebSocket) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, user_id: int, websocket: WebSocket)", "scope": "ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "disconnect", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/services/notifications.py", "pattern": "/^    def disconnect(self, user_id: int, websocket: WebSocket) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, user_id: int, websocket: WebSocket)", "scope": "ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "send_personal_message", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/services/notifications.py", "pattern": "/^    async def send_personal_message(self, user_id: int, message: dict) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, user_id: int, message: dict)", "scope": "ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "ws_manager", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/services/notifications.py", "pattern": "/^ws_manager = ConnectionManager()$/", "language": "Python", "kind": "variable"}], "hash": "91df42930e4e0d2ab1c41fbaf71eb894", "format-version": 4, "code-base-name": "fitness_nutrition_backend", "filename": "fitness_nutrition_backend/src/services/notifications.py", "fields": [{"name": "ws_manager = ConnectionManager()", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"126": ""}]}