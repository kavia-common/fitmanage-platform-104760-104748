{"is_source_file": true, "format": "Python", "description": "This file provides service functions for generating reports related to clients, workout logs, diet entries, and entity counts within a fitness management backend. It includes functions for retrieving entity counts, activity trends, and client breakdowns, utilizing SQLAlchemy ORM queries.", "external_files": ["src/models.py"], "external_methods": ["sqlalchemy.func", "sqlalchemy.cast", "sqlalchemy.Date", "sqlalchemy.orm.Session", "datetime.date", "datetime.datetime", "datetime.timedelta"], "published": ["get_entity_counts", "get_activity_trends", "get_clients_breakdown"], "classes": [], "methods": [{"name": "tuple[date,date] _default_date_range(days: int = 30)", "description": "Returns a tuple with start and end dates for a specified number of recent days.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,int] get_entity_counts(db: Session, current_user_id: int, role_names: set[str])", "description": "Provides high-level counts of clients, workout plans, diet plans, and protocol goals, applying ownership rules based on user roles.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] get_activity_trends(db: Session, current_user_id: int, role_names: set[str], days: int = 30)", "description": "Retrieves activity trends over a specified number of days for workout logs and diet entries, grouped by date.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] get_clients_breakdown(db: Session, current_user_id: int, role_names: set[str])", "description": "Generates a breakdown per client of the number of associated workout and diet plans.", "scope": "", "scopeKind": ""}, {"name": "_count(query)", "scope": "get_entity_counts", "scopeKind": "function", "description": "unavailable"}], "calls": ["db.query", "func.count", "func.count().scalar", "session.query", "Client.id", "WorkoutPlan.id", "DietPlan.id", "ProtocolGoal.id", "WorkoutLog.date", "DietEntry.date"], "search-terms": ["reports", "entity_counts", "activity_trends", "client_breakdown", "fitness_backend", "service.py"], "state": 2, "file_id": 53, "knowledge_revision": 146, "git_revision": "", "ctags": [{"_type": "tag", "name": "_count", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/reports/service.py", "pattern": "/^    def _count(query):$/", "file": true, "language": "Python", "kind": "function", "signature": "(query)", "scope": "get_entity_counts", "scopeKind": "function"}, {"_type": "tag", "name": "_default_date_range", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/reports/service.py", "pattern": "/^def _default_date_range(days: int = 30) -> tuple[date, date]:$/", "language": "Python", "typeref": "typename:tuple[date,date]", "kind": "function", "signature": "(days: int = 30)"}, {"_type": "tag", "name": "get_activity_trends", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/reports/service.py", "pattern": "/^def get_activity_trends(db: Session, current_user_id: int, role_names: set[str], days: int = 30)/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(db: Session, current_user_id: int, role_names: set[str], days: int = 30)"}, {"_type": "tag", "name": "get_clients_breakdown", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/reports/service.py", "pattern": "/^def get_clients_breakdown(db: Session, current_user_id: int, role_names: set[str]) -> Dict[str, /", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(db: Session, current_user_id: int, role_names: set[str])"}, {"_type": "tag", "name": "get_entity_counts", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/reports/service.py", "pattern": "/^def get_entity_counts(db: Session, current_user_id: int, role_names: set[str]) -> Dict[str, int]/", "language": "Python", "typeref": "typename:Dict[str,int]", "kind": "function", "signature": "(db: Session, current_user_id: int, role_names: set[str])"}], "hash": "744869e60aaac7bbc84b10eb04ebc4e8", "format-version": 4, "code-base-name": "fitness_nutrition_backend", "filename": "fitness_nutrition_backend/src/reports/service.py", "revision_history": [{"146": ""}]}