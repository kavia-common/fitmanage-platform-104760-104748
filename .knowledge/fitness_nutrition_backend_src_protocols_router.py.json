{"is_source_file": true, "format": "Python", "description": "This file defines API endpoints using FastAPI for managing protocol goals and their progress, including creation, retrieval, updating, and deletion, with ownership and access control enforced.", "external_files": ["src.api.utils", "src.core.database", "src.core.security", "src.models", "src.schemas.protocols"], "external_methods": ["pagination_params", "paginate", "assert_client_ownership_or_admin", "get_db", "get_current_user"], "published": ["router"], "classes": [{"name": "APIRouter", "description": "FastAPI class used to define a collection of API routes."}], "methods": [{"name": "list_protocol_goals( db: Session = Depends(get_db), current: User = Depends(get_current_user), offset_limit: tuple[int, int] = Depends(pagination_params), )", "description": "List protocol goals with pagination, ownership, and role-based filtering.", "scope": "", "scopeKind": ""}, {"name": "create_protocol_goal( payload: ProtocolGoalCreate, db: Session = Depends(get_db), current: User = Depends(get_current_user), )", "description": "Create a new protocol goal for a client, enforcing ownership.", "scope": "", "scopeKind": ""}, {"name": "get_protocol_goal( goal_id: int, db: Session = Depends(get_db), current: User = Depends(get_current_user), )", "description": "Retrieve a specific protocol goal by ID, enforcing ownership.", "scope": "", "scopeKind": ""}, {"name": "update_protocol_goal( goal_id: int, payload: ProtocolGoalCreate, db: Session = Depends(get_db), current: User = Depends(get_current_user), )", "description": "Update an existing protocol goal, enforcing ownership and possibly changing the client.", "scope": "", "scopeKind": ""}, {"name": "delete_protocol_goal( goal_id: int, db: Session = Depends(get_db), current: User = Depends(get_current_user), )", "description": "Delete a protocol goal, enforcing ownership.", "scope": "", "scopeKind": ""}, {"name": "list_progress( goal_id: int, db: Session = Depends(get_db), current: User = Depends(get_current_user), offset_limit: tuple[int, int] = Depends(pagination_params), )", "description": "List progress entries for a protocol goal, enforcing ownership.", "scope": "", "scopeKind": ""}, {"name": "create_progress( goal_id: int, payload: GoalProgressCreate, db: Session = Depends(get_db), current: User = Depends(get_current_user), )", "description": "Add a progress measurement to a protocol goal, enforcing ownership.", "scope": "", "scopeKind": ""}, {"name": "delete_progress( goal_id: int, progress_id: int, db: Session = Depends(get_db), current: User = Depends(get_current_user), )", "description": "Delete a progress entry from a protocol goal, enforcing ownership.", "scope": "", "scopeKind": ""}], "calls": ["db.query", "db.get", "db.add", "db.commit", "db.refresh", "db.delete", "assert_client_ownership_or_admin", "paginate", "get_db", "get_current_user"], "search-terms": ["protocol goals", "progress endpoints", "ownership enforcement", "FastAPI", "router", "CRUD operations"], "state": 2, "file_id": 47, "knowledge_revision": 117, "git_revision": "", "ctags": [{"_type": "tag", "name": "create_progress", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/protocols/router.py", "pattern": "/^def create_progress($/", "language": "Python", "kind": "function", "signature": "( goal_id: int, payload: GoalProgressCreate, db: Session = Depends(get_db), current: User = Depends(get_current_user), )"}, {"_type": "tag", "name": "create_protocol_goal", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/protocols/router.py", "pattern": "/^def create_protocol_goal($/", "language": "Python", "kind": "function", "signature": "( payload: ProtocolGoalCreate, db: Session = Depends(get_db), current: User = Depends(get_current_user), )"}, {"_type": "tag", "name": "delete_progress", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/protocols/router.py", "pattern": "/^def delete_progress($/", "language": "Python", "kind": "function", "signature": "( goal_id: int, progress_id: int, db: Session = Depends(get_db), current: User = Depends(get_current_user), )"}, {"_type": "tag", "name": "delete_protocol_goal", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/protocols/router.py", "pattern": "/^def delete_protocol_goal($/", "language": "Python", "kind": "function", "signature": "( goal_id: int, db: Session = Depends(get_db), current: User = Depends(get_current_user), )"}, {"_type": "tag", "name": "get_protocol_goal", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/protocols/router.py", "pattern": "/^def get_protocol_goal($/", "language": "Python", "kind": "function", "signature": "( goal_id: int, db: Session = Depends(get_db), current: User = Depends(get_current_user), )"}, {"_type": "tag", "name": "list_progress", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/protocols/router.py", "pattern": "/^def list_progress($/", "language": "Python", "kind": "function", "signature": "( goal_id: int, db: Session = Depends(get_db), current: User = Depends(get_current_user), offset_limit: tuple[int, int] = Depends(pagination_params), )"}, {"_type": "tag", "name": "list_protocol_goals", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/protocols/router.py", "pattern": "/^def list_protocol_goals($/", "language": "Python", "kind": "function", "signature": "( db: Session = Depends(get_db), current: User = Depends(get_current_user), offset_limit: tuple[int, int] = Depends(pagination_params), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/protocols/router.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "update_protocol_goal", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/protocols/router.py", "pattern": "/^def update_protocol_goal($/", "language": "Python", "kind": "function", "signature": "( goal_id: int, payload: ProtocolGoalCreate, db: Session = Depends(get_db), current: User = Depends(get_current_user), )"}], "hash": "f9b6b7bf36a0897dc2898837267e95ee", "format-version": 4, "code-base-name": "fitness_nutrition_backend", "filename": "fitness_nutrition_backend/src/protocols/router.py", "fields": [{"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"117": ""}]}