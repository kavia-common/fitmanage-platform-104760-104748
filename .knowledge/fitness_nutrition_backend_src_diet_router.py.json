{"is_source_file": true, "format": "Python", "description": "This file defines API routes for managing diet plans, including listing, creating, retrieving, updating, and deleting diet plans with ownership and permission checks. It uses FastAPI and SQLAlchemy for web and database operations.", "external_files": ["src.api.utils", "src.core.database", "src.core.security", "src.models", "src.schemas.diet", "src.services.subscriptions"], "external_methods": ["pagination_params", "paginate", "assert_client_ownership_or_admin", "get_db", "get_current_user", "DietPlanCreate", "DietPlanRead", "ensure_within_limits_diet_plans"], "published": ["list_diet_plans", "create_diet_plan", "get_diet_plan", "update_diet_plan", "delete_diet_plan"], "classes": [], "methods": [{"name": "list_diet_plans( db: Session = Depends(get_db), current: User = Depends(get_current_user), offset_limit: tuple[int, int] = Depends(pagination_params), )", "description": "Handles GET requests to list diet plans with pagination and ownership filtering based on user role.", "scope": "", "scopeKind": ""}, {"name": "create_diet_plan( payload: DietPlanCreate, db: Session = Depends(get_db), current: User = Depends(get_current_user), )", "description": "Handles POST requests to create a new diet plan, ensuring client ownership and subscription limits.", "scope": "", "scopeKind": ""}, {"name": "get_diet_plan( plan_id: int, db: Session = Depends(get_db), current: User = Depends(get_current_user), )", "description": "Handles GET requests to retrieve a specific diet plan by ID with ownership validation.", "scope": "", "scopeKind": ""}, {"name": "update_diet_plan( plan_id: int, payload: DietPlanCreate, db: Session = Depends(get_db), current: User = Depends(get_current_user), )", "description": "Handles PUT requests to update a diet plan after ownership validation.", "scope": "", "scopeKind": ""}, {"name": "delete_diet_plan( plan_id: int, db: Session = Depends(get_db), current: User = Depends(get_current_user), )", "description": "Handles DELETE requests to remove a diet plan after ownership validation.", "scope": "", "scopeKind": ""}], "calls": ["get_db", "get_current_user", "pagination_params", "paginate", "assert_client_ownership_or_admin", "ensure_within_limits_diet_plans"], "search-terms": ["diet plans API", "FastAPI router", "ownership enforcement", "diet plan CRUD", "SQLAlchemy query"], "state": 2, "file_id": 12, "knowledge_revision": 133, "git_revision": "ef99c1baf7b51f61076574998e7a17dca8300a43", "revision_history": [{"40": "c104eb7110ab4172547901562876f5735f48c908"}, {"96": "c104eb7110ab4172547901562876f5735f48c908"}, {"113": "9b863804a128c3935e8babe79d0fee05f5a1e68a"}, {"132": "ef99c1baf7b51f61076574998e7a17dca8300a43"}, {"133": "ef99c1baf7b51f61076574998e7a17dca8300a43"}], "ctags": [{"_type": "tag", "name": "create_diet_plan", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/diet/router.py", "pattern": "/^def create_diet_plan($/", "language": "Python", "kind": "function", "signature": "( payload: DietPlanCreate, db: Session = Depends(get_db), current: User = Depends(get_current_user), )"}, {"_type": "tag", "name": "delete_diet_plan", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/diet/router.py", "pattern": "/^def delete_diet_plan($/", "language": "Python", "kind": "function", "signature": "( plan_id: int, db: Session = Depends(get_db), current: User = Depends(get_current_user), )"}, {"_type": "tag", "name": "get_diet_plan", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/diet/router.py", "pattern": "/^def get_diet_plan($/", "language": "Python", "kind": "function", "signature": "( plan_id: int, db: Session = Depends(get_db), current: User = Depends(get_current_user), )"}, {"_type": "tag", "name": "list_diet_plans", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/diet/router.py", "pattern": "/^def list_diet_plans($/", "language": "Python", "kind": "function", "signature": "( db: Session = Depends(get_db), current: User = Depends(get_current_user), offset_limit: tuple[int, int] = Depends(pagination_params), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/diet/router.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "update_diet_plan", "path": "/home/kavia/workspace/code-generation/fitmanage-platform-104760-104748/fitness_nutrition_backend/src/diet/router.py", "pattern": "/^def update_diet_plan($/", "language": "Python", "kind": "function", "signature": "( plan_id: int, payload: DietPlanCreate, db: Session = Depends(get_db), current: User = Depends(get_current_user), )"}], "hash": "78a69f023cee37c7348114325293f700", "format-version": 4, "code-base-name": "fitness_nutrition_backend", "filename": "fitness_nutrition_backend/src/diet/router.py", "fields": [{"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}]}